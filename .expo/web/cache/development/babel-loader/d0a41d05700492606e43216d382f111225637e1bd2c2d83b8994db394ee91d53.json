{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Audio } from 'expo-av';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function RecordAudio(_ref) {\n  var onStop = _ref.onStop;\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    recording = _React$useState2[0],\n    setRecording = _React$useState2[1];\n  function startRecording() {\n    return _startRecording.apply(this, arguments);\n  }\n  function _startRecording() {\n    _startRecording = _asyncToGenerator(function* () {\n      try {\n        var _yield$Audio$requestP = yield Audio.requestPermissionsAsync(),\n          granted = _yield$Audio$requestP.granted;\n        if (!granted) return;\n        yield Audio.setAudioModeAsync({\n          allowsRecordingIOS: true\n        });\n        var _yield$Audio$Recordin = yield Audio.Recording.createAsync(Audio.RecordingOptionsPresets.HIGH_QUALITY),\n          _recording = _yield$Audio$Recordin.recording;\n        setRecording(_recording);\n      } catch (err) {\n        console.error('Failed to start recording:', err);\n      }\n    });\n    return _startRecording.apply(this, arguments);\n  }\n  function stopRecording() {\n    return _stopRecording.apply(this, arguments);\n  }\n  function _stopRecording() {\n    _stopRecording = _asyncToGenerator(function* () {\n      if (!recording) return;\n      yield recording.stopAndUnloadAsync();\n      var uri = recording.getURI();\n      onStop(uri);\n      setRecording(null);\n    });\n    return _stopRecording.apply(this, arguments);\n  }\n  useEffect(function () {\n    startRecording();\n    return function () {\n      return recording ? recording.stopAndUnloadAsync() : undefined;\n    };\n  }, []);\n  return _jsx(View, {\n    children: _jsx(Button, {\n      title: \"Stop Recording\",\n      onPress: stopRecording\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","Button","View","Audio","jsx","_jsx","RecordAudio","_ref","onStop","_React$useState","useState","_React$useState2","_slicedToArray","recording","setRecording","startRecording","_startRecording","apply","arguments","_asyncToGenerator","_yield$Audio$requestP","requestPermissionsAsync","granted","setAudioModeAsync","allowsRecordingIOS","_yield$Audio$Recordin","Recording","createAsync","RecordingOptionsPresets","HIGH_QUALITY","err","console","error","stopRecording","_stopRecording","stopAndUnloadAsync","uri","getURI","undefined","children","title","onPress"],"sources":["C:/Users/Administrator/Desktop/Audio/Expo-Record-Audio/components/RecordAudio.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Button, View } from 'react-native';\r\nimport { Audio } from 'expo-av';\r\n\r\nexport default function RecordAudio({ onStop }) {\r\n  const [recording, setRecording] = React.useState(null);\r\n\r\n  async function startRecording() {\r\n    try {\r\n      const { granted } = await Audio.requestPermissionsAsync();\r\n      if (!granted) return;\r\n\r\n      await Audio.setAudioModeAsync({ allowsRecordingIOS: true });\r\n      const { recording } = await Audio.Recording.createAsync(Audio.RecordingOptionsPresets.HIGH_QUALITY);\r\n      setRecording(recording);\r\n    } catch (err) {\r\n      console.error('Failed to start recording:', err);\r\n    }\r\n  }\r\n\r\n  async function stopRecording() {\r\n    if (!recording) return;\r\n    await recording.stopAndUnloadAsync();\r\n    const uri = recording.getURI();\r\n    onStop(uri);\r\n    setRecording(null);\r\n  }\r\n\r\n  useEffect(() => {\r\n    startRecording();\r\n    return () => recording ? recording.stopAndUnloadAsync() : undefined;\r\n  }, []);\r\n\r\n  return (\r\n    <View>\r\n      <Button title=\"Stop Recording\" onPress={stopRecording} />\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAAC,OAAAC,MAAA;AAAA,OAAAC,IAAA;AAEzC,SAASC,KAAK,QAAQ,SAAS;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEhC,eAAe,SAASC,WAAWA,CAAAC,IAAA,EAAa;EAAA,IAAVC,MAAM,GAAAD,IAAA,CAANC,MAAM;EAC1C,IAAAC,eAAA,GAAkCV,KAAK,CAACW,QAAQ,CAAC,IAAI,CAAC;IAAAC,gBAAA,GAAAC,cAAA,CAAAH,eAAA;IAA/CI,SAAS,GAAAF,gBAAA;IAAEG,YAAY,GAAAH,gBAAA;EAAyB,SAExCI,cAAcA,CAAA;IAAA,OAAAC,eAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAA,SAAAF,gBAAA;IAAAA,eAAA,GAAAG,iBAAA,CAA7B,aAAgC;MAC9B,IAAI;QACF,IAAAC,qBAAA,SAA0BjB,KAAK,CAACkB,uBAAuB,CAAC,CAAC;UAAjDC,OAAO,GAAAF,qBAAA,CAAPE,OAAO;QACf,IAAI,CAACA,OAAO,EAAE;QAEd,MAAMnB,KAAK,CAACoB,iBAAiB,CAAC;UAAEC,kBAAkB,EAAE;QAAK,CAAC,CAAC;QAC3D,IAAAC,qBAAA,SAA4BtB,KAAK,CAACuB,SAAS,CAACC,WAAW,CAACxB,KAAK,CAACyB,uBAAuB,CAACC,YAAY,CAAC;UAA3FhB,UAAS,GAAAY,qBAAA,CAATZ,SAAS;QACjBC,YAAY,CAACD,UAAS,CAAC;MACzB,CAAC,CAAC,OAAOiB,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;MAClD;IACF,CAAC;IAAA,OAAAd,eAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAA,SAEce,aAAaA,CAAA;IAAA,OAAAC,cAAA,CAAAjB,KAAA,OAAAC,SAAA;EAAA;EAAA,SAAAgB,eAAA;IAAAA,cAAA,GAAAf,iBAAA,CAA5B,aAA+B;MAC7B,IAAI,CAACN,SAAS,EAAE;MAChB,MAAMA,SAAS,CAACsB,kBAAkB,CAAC,CAAC;MACpC,IAAMC,GAAG,GAAGvB,SAAS,CAACwB,MAAM,CAAC,CAAC;MAC9B7B,MAAM,CAAC4B,GAAG,CAAC;MACXtB,YAAY,CAAC,IAAI,CAAC;IACpB,CAAC;IAAA,OAAAoB,cAAA,CAAAjB,KAAA,OAAAC,SAAA;EAAA;EAEDlB,SAAS,CAAC,YAAM;IACde,cAAc,CAAC,CAAC;IAChB,OAAO;MAAA,OAAMF,SAAS,GAAGA,SAAS,CAACsB,kBAAkB,CAAC,CAAC,GAAGG,SAAS;IAAA;EACrE,CAAC,EAAE,EAAE,CAAC;EAEN,OACEjC,IAAA,CAACH,IAAI;IAAAqC,QAAA,EACHlC,IAAA,CAACJ,MAAM;MAACuC,KAAK,EAAC,gBAAgB;MAACC,OAAO,EAAER;IAAc,CAAE;EAAC,CACrD,CAAC;AAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}